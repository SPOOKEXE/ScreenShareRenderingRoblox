
print("start")

local HttpService = game:GetService('HttpService')
local ReplicatedStorage = game:GetService('ReplicatedStorage')

local RemoteService = require(ReplicatedStorage:WaitForChild('RemoteService'))
local ReplicateRemote = RemoteService:GetRemote('Replicate', 'RemoteEvent', false)

local IP = "http://127.0.0.1:500"

function GetLatest()
	print('request')
	return syn.request({
		Url = IP,
		Method = "POST",
		Headers = {
			["Content-Type"] = "application/json"
		},
		Body = '{"Epic": true}'
	})['Body']
end

-- test
_G.Enabled = true
while _G.Enabled do
	task.wait(1)
	local Data = GetLatest()
	print('got ', #Data)
	ReplicateRemote:FireServer(HttpService:JSONDecode(Data))
end
